import{t as b,j as L,n as S,k as re,l as ue,m as V,q as de,s as P,v as fe,x as Y,r as B,y as N,z as R,A as Z,a as d,T as q,B as h,C as ve,D as $,E as W,G as J,H as j,I as ye,J as Q,K as X,L as me,M as he,F as ge,N as I,O as Ce,P as U,Q as ke,R as ee,S as Oe,U as we,V as be,W as Ie,X as Se,Y as Pe,Z as xe,$ as pe,a0 as Te,a1 as ze,a2 as Be}from"./index-Co4WNHqi.js";import{c as Ae}from"./interceptor-CJjjmAk1.js";let Le=2e3;const De=()=>++Le,Ee={show:Boolean,zIndex:S,overlay:b,duration:S,teleport:[String,Object],lockScroll:b,lazyRender:b,beforeClose:Function,overlayStyle:Object,overlayClass:L,transitionAppear:Boolean,closeOnClickOverlay:b};let p=0;const F="van-overflow-hidden";function _e(e,t){const n=re(),l="01",o="10",i=a=>{n.move(a);const c=n.deltaY.value>0?o:l,k=fe(a.target,e.value),{scrollHeight:C,offsetHeight:O,scrollTop:x}=k;let w="11";x===0?w=O>=C?"00":"01":x+O>=C&&(w="10"),w!=="11"&&n.isVertical()&&!(parseInt(w,2)&parseInt(c,2))&&Y(a,!0)},r=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",i,{passive:!1}),p||document.body.classList.add(F),p++},u=()=>{p&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",i),p--,p||document.body.classList.remove(F))},g=()=>t()&&r(),f=()=>t()&&u();ue(g),V(f),de(f),P(t,a=>{a?r():u()})}function te(e){const t=B(!1);return P(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[Me,Ne]=R("overlay"),Re={show:Boolean,zIndex:S,duration:S,className:L,lockScroll:b,lazyRender:b,customStyle:Object};var $e=N({name:Me,props:Re,setup(e,{slots:t}){const n=B(),l=te(()=>e.show||!e.lazyRender),o=r=>{e.lockScroll&&Y(r,!0)},i=l(()=>{var r;const u=h(ve(e.zIndex),e.customStyle);return $(e.duration)&&(u.animationDuration=`${e.duration}s`),W(d("div",{ref:n,style:u,class:[Ne(),e.className]},[(r=t.default)==null?void 0:r.call(t)]),[[J,e.show]])});return Z("touchmove",o,{target:n}),()=>d(q,{name:"van-fade",appear:!0},{default:i})}});const je=j($e),Ue=h({},Ee,{round:Boolean,position:I("center"),closeIcon:I("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:I("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Ke,G]=R("popup");var He=N({name:Ke,inheritAttrs:!1,props:Ue,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:t,attrs:n,slots:l}){let o,i;const r=B(),u=B(),g=te(()=>e.show||!e.lazyRender),f=ye(()=>{const s={zIndex:r.value};if($(e.duration)){const m=e.position==="center"?"animationDuration":"transitionDuration";s[m]=`${e.duration}s`}return s}),a=()=>{o||(o=!0,r.value=e.zIndex!==void 0?+e.zIndex:De(),t("open"))},c=()=>{o&&Ae(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},k=s=>{t("click-overlay",s),e.closeOnClickOverlay&&c()},C=()=>{if(e.overlay)return d(je,{show:e.show,class:e.overlayClass,zIndex:r.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:k},{default:l["overlay-content"]})},O=s=>{t("click-close-icon",s),c()},x=()=>{if(e.closeable)return d(ee,{role:"button",tabindex:0,name:e.closeIcon,class:[G("close-icon",e.closeIconPosition),ke],classPrefix:e.iconPrefix,onClick:O},null)},w=()=>t("opened"),se=()=>t("closed"),le=s=>t("keydown",s),ce=g(()=>{var s;const{round:m,position:A,safeAreaInsetTop:M,safeAreaInsetBottom:ie}=e;return W(d("div",U({ref:u,style:f.value,role:"dialog",tabindex:0,class:[G({round:m,[A]:A}),{"van-safe-area-top":M,"van-safe-area-bottom":ie}],onKeydown:le},n),[(s=l.default)==null?void 0:s.call(l),x()]),[[J,e.show]])}),H=()=>{const{position:s,transition:m,transitionAppear:A}=e,M=s==="center"?"van-fade":`van-popup-slide-${s}`;return d(q,{name:m||M,appear:A,onAfterEnter:w,onAfterLeave:se},{default:ce})};return P(()=>e.show,s=>{s&&!o&&(a(),n.tabindex===0&&Ce(()=>{var m;(m=u.value)==null||m.focus()})),!s&&o&&(o=!1,t("close"))}),Q({popupRef:u}),_e(u,()=>e.show&&e.lockScroll),Z("popstate",()=>{e.closeOnPopstate&&(c(),i=!1)}),X(()=>{e.show&&a()}),me(()=>{i&&(t("update:show",!0),i=!1)}),V(()=>{e.show&&e.teleport&&(c(),i=!0)}),Oe(we,()=>e.show),()=>e.teleport?d(he,{to:e.teleport},{default:()=>[C(),H()]}):d(ge,null,[C(),H()])}});const Fe=j(He);function Ge(){const e=Ie({show:!1}),t=o=>{e.show=o},n=o=>{h(e,o,{transitionAppear:!0}),t(!0)},l=()=>t(!1);return Q({open:n,close:l,toggle:t}),{open:n,close:l,state:e,toggle:t}}function Ve(e){const t=be(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}let T=0;function Ye(e){e?(T||document.body.classList.add("van-toast--unclickable"),T++):T&&(T--,T||document.body.classList.remove("van-toast--unclickable"))}const[Ze,z]=R("toast"),qe=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],We={icon:String,show:Boolean,type:I("text"),overlay:Boolean,message:S,iconSize:S,duration:Se(2e3),position:I("middle"),teleport:[String,Object],className:L,iconPrefix:String,transition:I("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:L,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ne=N({name:Ze,props:We,emits:["update:show"],setup(e,{emit:t}){let n,l=!1;const o=()=>{const a=e.show&&e.forbidClick;l!==a&&(l=a,Ye(l))},i=a=>t("update:show",a),r=()=>{e.closeOnClick&&i(!1)},u=()=>clearTimeout(n),g=()=>{const{icon:a,type:c,iconSize:k,iconPrefix:C,loadingType:O}=e;if(a||c==="success"||c==="fail")return d(ee,{name:a||c,size:k,class:z("icon"),classPrefix:C},null);if(c==="loading")return d(pe,{class:z("loading"),size:k,type:O},null)},f=()=>{const{type:a,message:c}=e;if($(c)&&c!=="")return a==="html"?d("div",{key:0,class:z("text"),innerHTML:String(c)},null):d("div",{class:z("text")},[c])};return P(()=>[e.show,e.forbidClick],o),P(()=>[e.show,e.type,e.message,e.duration],()=>{u(),e.show&&e.duration>0&&(n=setTimeout(()=>{i(!1)},e.duration))}),X(o),Pe(o),()=>d(Fe,U({class:[z([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:r,onClosed:u,"onUpdate:show":i},xe(e,qe)),{default:()=>[g(),f()]})}});const oe={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let v=[],_=!1,D=h({},oe);const E=new Map;function ae(e){return ze(e)?e:{message:e}}function Je(){const{instance:e,unmount:t}=Ve({setup(){const n=B(""),{open:l,state:o,close:i,toggle:r}=Ge(),u=()=>{_&&(v=v.filter(f=>f!==e),t())},g=()=>d(ne,U(o,{onClosed:u,"onUpdate:show":r}),null);return P(n,f=>{o.message=f}),Be().render=g,{open:l,clear:i,message:n}}});return e}function Qe(){if(!v.length||_){const e=Je();v.push(e)}return v[v.length-1]}function y(e={}){if(!Te)return{};const t=Qe(),n=ae(e);return t.open(h({},D,E.get(n.type||D.type),n)),t}const K=e=>t=>y(h({type:e},ae(t)));y.loading=K("loading");y.success=K("success");y.fail=K("fail");y.clear=e=>{var t;v.length&&(e?(v.forEach(n=>{n.clear()}),v=[]):_?(t=v.shift())==null||t.clear():v[0].clear())};function Xe(e,t){typeof e=="string"?E.set(e,t):h(D,e)}y.setDefaultOptions=Xe;y.resetDefaultOptions=e=>{typeof e=="string"?E.delete(e):(D=h({},oe),E.clear())};y.allowMultiple=(e=!0)=>{_=e};y.install=e=>{e.use(j(ne)),e.config.globalProperties.$toast=y};export{y as T};
